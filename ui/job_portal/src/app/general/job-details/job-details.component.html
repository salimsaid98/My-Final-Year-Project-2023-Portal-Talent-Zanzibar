<app-nav-bar></app-nav-bar>

<div class="tr-breadcrumb bg-image section-before">
  <div class="container">
    <div class="breadcrumb-info text-center">
      <div class="breadcrumb-logo">
        <img
          src="../../../assets/images/others/company-logo.png"
          alt="Logo"
          class="img-fluid"
        />
      </div>
      <div class="page-title">
        <h1 *ngIf="job_data">
          {{ job_data.job_tittle }} @ {{ job_data.company_name }}
        </h1>
      </div>
      <ul class="tr-list job-meta list-inline">
        <li *ngIf="job_data">
          <i class="fa fa-map-signs" aria-hidden="true"></i>
          {{ job_data.country }} , {{ job_data.state }} ,{{ job_data.city }}
        </li>
        <li *ngIf="job_data">
          <i class="fa fa-map-marker" aria-hidden="true" *ngIf="job_data"></i
          >{{ job_data.job_category }}
        </li>
        <li *ngIf="job_data">
          <i class="fa fa-money" aria-hidden="true" *ngIf="job_data"></i
          >{{ job_data.salary_information }}
        </li>
        <li *ngIf="job_data">
          <i class="fa fa-tags" aria-hidden="true" *ngIf="job_data"></i
          >{{ job_data.job_type }}
        </li>
        <li *ngIf="job_data">
          <i class="fa fa-hourglass-start" aria-hidden="true"></i>Application
          Deadline : {{ job_data.end_date }}
        </li>
      </ul>
      <div class="buttons" *ngIf="user_role == 'Seeker'">
        <button (click)="apply_this_job(job_data.job_post_id)" class="btn btn-primary"
          ><i class="fa fa-briefcase" aria-hidden="true"></i>Apply For This
          Job</button
        >
      </div>

      <div class="buttons" *ngIf="user_role == 'Company'">
        <a
          style="cursor: pointer"
          (click)="goTo(job_data.job_post_id)"
          class="btn btn-primary"
          ><i class="fa fa-briefcase" aria-hidden="true"></i>Approved Applicants
          for this Job Post</a
        >
      </div>
    </div>
  </div>
</div>
<div class="job-details section-padding">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-lg-9">
        <div class="job-summary section">
          <span class="tr-title">Job Summary</span>
          <p *ngIf="job_data">
            {{ job_data.job_description }}
          </p>
          <span>Key Responsibilities:</span>
          <p *ngIf="job_data">
            {{ job_data.key_responsibilities }}
          </p>
          <span>Minimum Requirements</span>
          <ul class="tr-list">
            <li *ngIf="job_data">
              {{ job_data.minimum_requirement }}
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-4 col-lg-3">
        <div class="tr-sidebar">
          <div class="widget-area">
            <div class="widget short-info">
              <h3 class="widget_title">Short Info</h3>
              <ul class="tr-list">
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Published:</span> {{ job_data.starting_date }}
                  </div>
                </li>
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-user-plus" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Job poster:</span> {{ job_data.posted_by }}
                  </div>
                </li>
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-industry" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Industry:</span>{{ job_data.job_tittle }}
                  </div>
                </li>
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-line-chart" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Experience:</span>{{ job_data.experience_level }}
                  </div>
                </li>
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-key" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Job function:</span>{{ job_data.job_tittle }}
                  </div>
                </li>
                <li class="media">
                  <div class="pull-left">
                    <i class="fa fa-key" aria-hidden="true"></i>
                  </div>
                  <div class="media-body" *ngIf="job_data">
                    <span>Posts:</span>{{ job_data.required_people }} posts
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <label for="">Similar Job Post</label>
          <div class="job-item">
            <div class="item-overlay">
              <div class="job-info">
                <a class="btn btn-primary">Job Category</a>
                <span class="tr-title">
                  <a>Job Tittle</a>
                  <span><a></a></span>
                </span>
                <ul class="tr-list job-meta">
                  <li>
                    <i class="fa fa-briefcase" aria-hidden="true"
                      >experience_level</i
                    >
                  </li>
                  <li>
                    <span
                      ><i class="fa fa-calendar" aria-hidden="true"
                        >Dead Line</i
                      ></span
                    >
                  </li>
                </ul>
                <ul class="job-social tr-list">
                  <li>
                    <a
                      ><i class="fa fa-long-arrow-right" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="job-info">
              <div class="company-logo">
                <img
                  src="../../../assets/images/job/1.png"
                  alt="images"
                  class="img-fluid"
                />
              </div>
              <span class="tr-title">
                <a>job_tittle</a>
              </span>
              <ul class="tr-list job-meta">
                <li>
                  <span><i class="fa fa-calendar" aria-hidden="true"></i></span
                  >Deadline :
                </li>
              </ul>
              <div class="time">
                <a><span>job_categor</span></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tr-job-posted similar-jobs" *ngIf="user_role == 'Company' && check == true">
      <span class="tr-title">People who Applied This Post</span>
      <div class="row">
        <div class="col-md-12">
          <table mat-table [dataSource]="dataSource">
            <!-- ID Column -->
            <ng-container matColumnDef="ID">
              <th mat-header-cell *matHeaderCellDef>No.</th>
              <td mat-cell *matCellDef="let i = index">{{ i + 1 }}</td>
            </ng-container>
            <!--  Column -->
            <ng-container matColumnDef="empName">
              <th mat-header-cell *matHeaderCellDef>Employee Name</th>
              <td mat-cell *matCellDef="let element">{{element.first_name + " " + element.middle_name + " " + element.last_name}}</td>
            </ng-container>
            <ng-container matColumnDef="Gender">
              <th mat-header-cell *matHeaderCellDef>Gender</th>
              <td mat-cell *matCellDef="let element">{{element.gender}}</td>
            </ng-container>
            <ng-container matColumnDef="Specialization">
              <th mat-header-cell *matHeaderCellDef>Specialization</th>
              <td mat-cell *matCellDef="let element">{{element.specialization}}</td>
            </ng-container>
            <!-- dob -->
            <ng-container matColumnDef="country_of_origin">
              <th mat-header-cell *matHeaderCellDef>Country</th>
              <td mat-cell *matCellDef="let element">{{element.country_of_origin}}</td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let element">
                  <span class="badge badge-warning" *ngIf="element.status == 0">Pending Approval</span>
                  <span class="badge badge-danger" *ngIf="element.status == 2">Not Approved</span>
                  <span class="badge badge-success" *ngIf="element.status == 1">Approved Applicant</span>
              </td>
            </ng-container>

            <ng-container matColumnDef="Actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let element">
                <a *ngIf="element.status == 0" (click)="gotToInformation(element)" style="cursor: pointer;" title="View Applicant">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                </a>

                <a *ngIf="element.status != 0" (click)="gotToConfirmedInformation(element)" style="cursor: pointer;" title="View Applicant">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                </a>

              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">
                No data matching the filter "
              </td>
            </tr>
          </table>
          <mat-paginator
            [pageSizeOptions]="[10, 15, 20]"
            showFirstLastButtons
            aria-label="Select page of periodic elements"
          >
          </mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
